{% extends "base.html" %}

{% block title %}Typewriter Collection - {{ SITENAME }}{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/css/typewriters.css" />
{% endblock %}

{% block content %}
<article class="page typewriters-page">
    <div class="typewriters-intro">
        <a href="{{ SITEURL }}/typewriters/" class="back-link">‚Üê Back to Typewriters</a>
        <h1>Typewriter Collection</h1>
        <p>A comprehensive catalog of my typewriter collection, featuring detailed information about each machine in both list and pivot views.</p>
    </div>
    
    <div class="view-controls">
        <button id="list-view-btn" class="view-btn active" data-view="list">
            <span>üìã</span> List View
        </button>
        <button id="pivot-view-btn" class="view-btn" data-view="pivot">
            <span>üìä</span> Pivot View
        </button>
    </div>
    
    <div class="typewriters-container">
        <!-- List View -->
        <div id="list-view" class="view-content active">
            <div class="table-controls">
                <input type="text" id="search-input" placeholder="Search typewriters..." class="search-input">
                <select id="sort-select" class="sort-select">
                    <option value="">-- Sort by --</option>
                    <option value="Typewriter Brand|asc">Make (A-Z)</option>
                    <option value="Typewriter Brand|desc">Make (Z-A)</option>
                    <option value="Year|asc">Year (Oldest First)</option>
                    <option value="Year|desc">Year (Newest First)</option>
                    <option value="Model|asc">Model (A-Z)</option>
                    <option value="Model|desc">Model (Z-A)</option>
                    <option value="Location|asc">Location (A-Z)</option>
                    <option value="Location|desc">Location (Z-A)</option>
                    <option value="Value|desc">Value (High to Low)</option>
                    <option value="Value|asc">Value (Low to High)</option>
                    <option value="Purchase Price|desc">Purchase Price (High to Low)</option>
                    <option value="Purchase Price|asc">Purchase Price (Low to High)</option>
                </select>
            </div>
            <div class="table-wrapper">
                <table id="typewriters-table" class="typewriters-table">
                    <thead id="table-head">
                        <!-- Headers will be populated by JavaScript -->
                    </thead>
                    <tbody id="table-body">
                        <!-- Rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="table-info">
                <span id="table-count">0</span> typewriters displayed
            </div>
        </div>
        
        <!-- Pivot View -->
        <div id="pivot-view" class="view-content">
            <div class="pivot-controls">
                <label>
                    Group by:
                    <select id="pivot-group" class="pivot-select">
                        <option value="Typewriter Brand">Brand</option>
                        <option value="Size">Size</option>
                        <option value="Electric/Manual">Type</option>
                        <option value="Location">Location</option>
                        <option value="Year">Year</option>
                    </select>
                </label>
                <label>
                    Show:
                    <select id="pivot-metric" class="pivot-select">
                        <option value="count">Count</option>
                        <option value="value">Total Value</option>
                        <option value="purchase">Total Purchase Price</option>
                    </select>
                </label>
            </div>
            <div id="pivot-chart" class="pivot-chart">
                <!-- Pivot data will be displayed here -->
            </div>
        </div>
    </div>
    
    <div class="update-info">
        <p><small>Last updated: <span id="last-updated">-</span></small></p>
        <p><small>To update this list, edit <code>content/typewriters.csv</code> and rebuild the site. CSV to JSON conversion happens automatically!</small></p>
    </div>
</article>
{% endblock %}

{% block extra_js %}
<script src="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/js/typewriters.js"></script>
{% endblock %}

