{% extends "base.html" %}

{% block title %}Typewriters - {{ SITENAME }}{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/css/typewriters.css" />
{% endblock %}

{% block content %}
<article class="page typewriters-page">
    <h1>Typewriters</h1>
    
    <div class="typewriters-intro">
        <p>My typewriter collection and related projects.</p>
    </div>
    
    <div class="collection-links">
        <a href="{{ SITEURL }}/typewriters/collection/" class="collection-link">
            <span>ðŸ“Š</span>
            <span>View Collection Spreadsheet</span>
        </a>
    </div>
    
    {% set all_articles = articles %}
    
    <!-- Collection Posts Section -->
    <section class="typewriter-section" id="collection-posts">
        <h2><a href="{{ SITEURL }}/typewriters/collection-posts/">Collection Posts</a></h2>
        <p>Machine pages and posts about my typewriter collection, restoration work, and related topics.</p>
    </section>
    
    <!-- 3D Type Elements Section -->
    <section class="typewriter-section" id="3d-type-elements">
        <h2><a href="{{ SITEURL }}/typewriters/3d-type-elements/">3D Type Elements</a></h2>
        <p>3D printing projects related to typewriters, with documentation and GitHub links for each sub-project.</p>
    </section>
    
    <!-- General Typewriter Posts Section -->
    <section class="typewriter-section" id="typewriter-posts">
        <p>General posts about typewriters, including collection updates, restoration work, and related topics.</p>
        
        {% set has_typewriter_posts = false %}
        {% for article in all_articles %}
            {% if article.category and article.category.name == "Typewriters" %}
                {% set has_typewriter_posts = true %}
            {% endif %}
        {% endfor %}
        
        {% if has_typewriter_posts %}
        <div class="posts-subsection">
            <div class="posts-list">
                {% for article in all_articles %}
                    {% if article.category and article.category.name == "Typewriters" %}
                        {% set is_special = false %}
                        {% if article.tags %}
                            {% for tag in article.tags %}
                                {% if tag.name == "my-collection" or tag.name == "3d-type-elements" %}
                                    {% set is_special = true %}
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                        {% if not is_special %}
                        <article class="post-preview">
                            <h4><a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a></h4>
                            <div class="post-meta">
                                <time datetime="{{ article.date.isoformat() }}">{{ article.locale_date }}</time>
                                {% if article.tags %}
                                <span class="tags">
                                    {% for tag in article.tags %}
                                    <a href="{{ SITEURL }}/{{ tag.url }}" class="tag">{{ tag.name }}</a>
                                    {% endfor %}
                                </span>
                                {% endif %}
                            </div>
                            {% if article.summary %}
                            <p class="post-summary">{{ article.summary }}</p>
                            {% endif %}
                            <a href="{{ SITEURL }}/{{ article.url }}" class="read-more">Read more â†’</a>
                        </article>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
        </div>
        {% else %}
        <p>No typewriter posts yet. Check back soon!</p>
        {% endif %}
    </section>
</article>
{% endblock %}

